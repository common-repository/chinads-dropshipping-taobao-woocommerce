jQuery(document).ready(function(a){"use strict";let b=tbdsParams.security,c=tbdsParams.ajaxUrl;function d(b){let a=b.closest("tr");switch(b.val()){case"fixed":a.find(".tbds-value-label-left").html("+"),a.find(".tbds-value-label-right").html("$");break;case"percent":a.find(".tbds-value-label-left").html("+"),a.find(".tbds-value-label-right").html("%");break;case"multiply":a.find(".tbds-value-label-left").html("x"),a.find(".tbds-value-label-right").html("");break;default:a.find(".tbds-value-label-left").html("="),a.find(".tbds-value-label-right").html("$")}}a("select.vi-ui.dropdown").viDropdown(),a(".search-category").select2({width:"100%",closeOnSelect:!1,placeholder:"Please fill in your category title",ajax:{url:"admin-ajax.php?action=tbds_search_cate&_vi_tbds_ajax_nonce="+b,dataType:"json",type:"GET",quietMillis:50,delay:250,data:a=>({keyword:a.term}),processResults:a=>({results:a}),cache:!0},escapeMarkup:function(a){return a},minimumInputLength:2}),a(".tbds-price-rule-add").on("click",function(){let b=a(".tbds-price-rule-row").last().clone();b.find(".tbds-price-from").val(""),b.find(".tbds-price-to").val(""),b.find(".tbds-plus-value-type").viDropdown(),a(".tbds-price-rule-container").append(b)}),a(document).on("click",".tbds-price-rule-remove",function(){let b=a(this),c=a(".tbds-price-rule-row"),d=b.closest(".tbds-price-rule-row");c.length>1&&confirm("Do you want to remove this row?")&&(d.fadeOut(300),setTimeout(()=>d.remove(),300))}),a(".vi-ui.button.primary").on("click",function(){let b=a("#tbds-import-currency-rate");if(b.length&&!b.val())return alert("Please enter Import products currency exchange rate"),!1}),a(document).on("change",'select[name="tbds_plus_value_type[]"]',function(){d(a(this))}),a(document).on("change",'select[name="tbds_price_default[plus_value_type]"]',function(){d(a(this))}),a(".tbds-select-plugin").on("change",function(){let b=a(".tbds-select-plugin:checked").length;a(".tbds-finish").text(b>0?"Install & Return to Dashboard":"Return to Dashboard")}),a(".tbds-toggle-select-plugin").on("change",function(){let b=a(this).prop("checked");a(".tbds-select-plugin").prop("checked",b),a(".tbds-finish").text(b?"Install & Return to Dashboard":"Return to Dashboard")}),a(".tbds-finish").on("click",function(){let e=a(this),d=a(".tbds-select-plugin:checked").map((c,b)=>a(b).data("plugin_slug")).toArray();return d.length>0?(e.addClass("loading"),a.ajax({url:c,type:"POST",dataType:"JSON",data:{action:"tbds_setup_install_plugins",nonce:b,install_plugins:d},success(){},complete(){a.ajax({url:c,type:"POST",dataType:"JSON",data:{action:"tbds_setup_activate_plugins",nonce:b,install_plugins:d},success(){},complete(){e.removeClass("loading"),window.location.href=tbdsParams.settingsPage}})}})):window.location.href=tbdsParams.settingsPage,!1})})